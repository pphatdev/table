import{a as c}from"./chunk-QV3VLEVY.js";import{a as m}from"./chunk-VXY77YWR.js";import{a as p}from"./chunk-WOT6VMZA.js";var u={};p(u,{Table:()=>r});import{twMerge as i}from"tailwind-merge";var n=class n{constructor(t,e){this.defaultOptions={staticData:!0,data:[],columns:[],option:{type:"normal"}};this.useStaticData=t=>{let e=new URLSearchParams(window.location.search),a=e.has("search")?Array.from(t).filter(o=>o.name.includes(e.get("search")||"")):t,s=c.success(a,a.length,{limit:e.get("limit")||"10",page:parseInt(e.get("page")||"1"),sort:e.get("sort")||"asc",search:e.get("search")||"",isStatic:!0,...Object.fromEntries(e)});this.data=s.result,this.pagination=s.pagination,this.init()};this.getThead=()=>this.element.querySelector("thead");this.getTheadChildrenLenth=()=>this.element.querySelectorAll("thead > *").length;this.getTBody=()=>this.element.querySelector("tbody");this.renderThead=()=>{var s;let t=this.getThead();n.theadColumns=this.theadColumns;let e=document.createElement("tr");t.innerHTML="",e.className=i("top-0 w-full font-medium bg-table-header",((s=this.options.option)==null?void 0:s.type)==="sticky"?"sticky":"normal");let a=n.thCells();return Array.from(a).forEach(o=>e.appendChild(o)),t.appendChild(e)};this.renderTBody=()=>{let t=this.getTBody();return t.innerHTML="",n.theadColumns=this.theadColumns,this.data.forEach(e=>{let a=document.createElement("tr");a.className="cursor-pointer odd:bg-table-odd even:bg-table-even/10 hover:bg-table-even/20",a.dataset.state="unchecked";let s=n.cells(e);Array.from(s).forEach(o=>a.appendChild(o)),t.appendChild(a)}),t};this.searchItems=()=>{let t=new URLSearchParams(window.location.search),e=`[data-table-id="search-${this.element.id}"]`,a=document.querySelector(e);if(!a)return null;a.value=t.get("search")||"",a.addEventListener("input",s=>{s.preventDefault();let o=s.target;if(t.set("search",o.value),t.set("page","1"),history.pushState(null,"",`${window.location.pathname}?${t.toString()}`),this.options.staticData){let d=this.options.data,l=Array.from(d).filter(h=>h.name.includes(o.value));this.searched=l,this.useStaticData(l)}})};this.setPage=()=>{let t=document.querySelectorAll("[data-setpage]");Array.from(t).map(e=>{e.addEventListener("click",()=>{this.options.staticData&&this.useStaticData(this.options.data)})})};this.init=()=>{this.renderThead(),this.renderTBody(),new m(document.querySelector(`[data-table-id="group-${this.element.id}"]`),{buttons:{items:this.pagination||[]}}),this.setPage(),n.element=this.element};n.options=this.options={...this.defaultOptions,...e},this.theadColumns=this.options.columns||[],this.element=t,this.useStaticData(this.options.data),this.searchItems()}};n.theadColumns=[],n.thCells=()=>n.theadColumns.map((t,e)=>{let a=document.createElement("th");return a.className=i("py-3 text-sm text-left font-medium",e==0?"pl-6":"px-3",t.className),typeof t.column=="object"&&"th"in t.column?a.innerHTML=(t.column.th||"").toString():a.innerHTML=(t.column||"").toString(),a}),n.cells=t=>n.theadColumns.map((e,a)=>{let s=document.createElement("td");return s.className=i("py-3 text-sm text-left",a==0?"pl-6":"px-3",e.className),typeof e.column=="object"&&typeof e.column.td=="function"?s.innerHTML=e.column.td(t)||"":s.innerHTML=t[e.key]||"",s});var r=n;export{r as a,u as b};
